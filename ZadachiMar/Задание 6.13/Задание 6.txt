#include <iostream>
#include <Windows.h>
#include <time.h>

using namespace std;

int main()
{
    SetConsoleCP(1251);
    SetConsoleOutputCP(1251);
    srand(time(0)); //Устанавливаем значение часов в качестве стартового числа
    int nAthletes; //количество спортсменов
    int mJudges; //количество судей
    int winnerIndex = 0; // Индекс победителя
    double winnersVerdict = 0; //Оценка победителя

    cout << "Введите колиство судей:";
    cin >> mJudges;
    cout << "Введите количество спортсменов:";
    cin >> nAthletes;
    if (nAthletes <= 0 || nAthletes > 65536 || mJudges <= 2 || mJudges > 65536) { // Чтобы не выйти за ограничения по массиву для компилятора
        cout << "\nВы ввели некорректное число выход из программы\n";
        return 1;
    }

    double* arrayAthletes = new double[nAthletes]; //Результаты оценок спортсменов
    for (int i = 0; i < nAthletes; i++) {
        cout << "\n\nАтлет №" << i << endl;
        double avgVerdict = 0;  // Окончательная оценка судей
        double summ = 0; //Сумма всех оценок
        int nMax = 0; //Максимальная оценка (100 бальная оценка)
        int nMin = 101; //Минимальная оценка  (100 бальная оценка)

        for (int j = 0; j < mJudges; j++) {
            int temp = rand() % 100 + 1; //Случайным образом генерруем оценку от судьи
            summ += temp;  // Суммируем все оценки для вычиления средней
            if (temp > nMax) {  //Ищем максимальное число
                nMax = temp;
            }
            if (temp < nMin) { //Ищем минимальное число
                nMin = temp;
            }
        }

        cout << "Минимальная оценка:" << nMin << endl;
        cout << "Максимальная оценка:" << nMax << endl;
        avgVerdict = (summ - nMin - nMax) / (mJudges - 2);
        cout << "Средняя оценка:" << avgVerdict << endl;


        arrayAthletes[i] = avgVerdict;

        if (winnersVerdict < avgVerdict) {
            winnersVerdict = avgVerdict;
            winnerIndex = i;
        }

    }


    cout << "\n\n\nПобедитель атлет №" << winnerIndex << endl;
    cout << "Его результат:" << winnersVerdict << endl;

    delete[] arrayAthletes; //Можно и не удалять ведь данный указатель на массив использоваться больше не будет и память будет и так освобождена

    arrayAthletes = 0;
    return 0;
}